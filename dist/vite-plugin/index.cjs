"use strict";var e=require("../chunk-EUN6VYDD.cjs"),r=require("path"),t=require("chalk"),o=require("vite-plugin-run"),n=require("fs");function a(e){return e&&e.__esModule?e:{default:e}}var l=a(r),i=a(t),s={sail:!1,types:!0,typesOnly:!1,delay:250,throttle:250,only:[],except:[]},p=i.default.bgHex("#00bcd4").black.bold(` ${e.CONFIG.PACKAGE.PREFIX.NAME} `),u={info:(e,r)=>{console.log(`\n${p} ${i.default.blueBright("ℹ️ "+e)} ${i.default.gray("➔")} ${i.default.white(r)}`)},success:(e,r)=>{console.log(`\n${p} ${i.default.greenBright("✅ "+e)} ${i.default.gray("➔")} ${i.default.whiteBright(r)}`)},warn:(e,r)=>{console.warn(`\n${p} ${i.default.yellow("⚠️  "+e)} ${i.default.gray("➔")} ${i.default.yellowBright(r)}`)},error:(e,r)=>{console.error(`\n${p} ${i.default.redBright("❌ "+e)} ${i.default.gray("➔")} ${i.default.red(r)}`)},throw:(r,t)=>{throw e.g(t)?(u.error(r,t.message),"development"===process.env.NODE_ENV&&t.stack&&console.error(i.default.gray(t.stack)),t):(u.error(r,"Unknown error occurred"),new Error(e.i(t)?t:"Unknown error"))},raw:e=>console.log(`\n${p} ${e}`)};function c(r,t){throw u.throw(r,t),e.i(t)?new Error(t):t}var{PACKAGIST_NAME:f}=e.CONFIG.PACKAGE,{PACKAGE:d,REPO:y}=e.CONFIG;module.exports=(t={})=>{e.n(t)||(t={});try{const a=(()=>{try{const t=r.resolve(process.cwd(),"composer.json"),o=n.readFileSync(t,"utf-8"),a=e.h(o);a?.require?.[f]||c("composer.json",`${f} not found in composer.json dependencies`);const l=a.require[f],i=l.match(/^[~^><]?(\d+)/);i||c("Version Format",`Invalid version format for ${f}: ${l}`);const s=i[1];return u.success("Composer Package",`${f} v${s}`),s}catch(r){e.g(r)&&("ENOENT"===r.code&&c("composer.json",`File not found in: ${process.cwd()}.`),c("Version Fetch Failed",r)),c("Unknown Error","Something exploded 💣")}})(),{delay:p=s.delay,throttle:d=s.throttle,except:y=s.except,group:g=s.group,only:h=s.only,sail:$=s.sail,types:w=s.types,typesOnly:m=s.typesOnly,url:v=s.url}=t;if(!e.e3(p))throw new TypeError(`Parameter \`delay\` property of the \`config\` (first parameter) must be of type \`integer-number\`, but received: \`${e.x(p)}\`, with value: \`${e.realValue(p)}\`.`);if(!e.e3(d))throw new TypeError(`Parameter \`throttle\` property of the \`config\` (first parameter) must be of type \`integer-number\`, but received: \`${e.x(d)}\`, with value: \`${e.realValue(d)}\`.`);if(!e.o(y))throw new TypeError(`Parameter \`except\` property of the \`config\` (first parameter) must be of type \`array\`, but received: \`${e.x(y)}\`, with value: \`${e.realValue(y)}\`.`);if(!e.p(g)&&!e.i(g))throw new TypeError(`Parameter \`group\` property of the \`config\` (first parameter) must be of type \`string\`, but received: \`${e.x(g)}\`, with value: \`${e.realValue(g)}\`.`);if(!e.o(h))throw new TypeError(`Parameter \`only\` property of the \`config\` (first parameter) must be of type \`array\`, but received: \`${e.x(h)}\`, with value: \`${e.realValue(h)}\`.`);if(!e.e($))throw new TypeError(`Parameter \`sail\` property of the \`config\` (first parameter) must be of type \`boolean\`, but received: \`${e.x($)}\`, with value: \`${e.realValue($)}\`.`);if(!e.e(w))throw new TypeError(`Parameter \`types\` property of the \`config\` (first parameter) must be of type \`boolean\`, but received: \`${e.x(w)}\`, with value: \`${e.realValue(w)}\`.`);if(!e.e(m))throw new TypeError(`Parameter \`typesOnly\` property of the \`config\` (first parameter) must be of type \`boolean\`, but received: \`${e.x(m)}\`, with value: \`${e.realValue(m)}\`.`);if(!e.p(v)&&!e.i(v))throw new TypeError(`Parameter \`url\` property of the \`config\` (first parameter) must be of type \`string\`, but received: \`${e.x(v)}\`, with value: \`${e.realValue(v)}\`.`);const E=y.filter(r=>!e.i(r));if(E.length>0)throw new TypeError(`Parameter \`except\` property of the \`config\` (first parameter) must be of type \`array-of-string\` and contains \`string\` only, invalid values: ${E.map(r=>`\n\`${e.x(r)}\`: \`${e.realValue(r)}\``).join(", ")}`);const b=h.filter(r=>!e.i(r));if(b.length>0)throw new TypeError(`Parameter \`only\` property of the \`config\` (first parameter) must be of type \`array-of-string\` and contains \`string\` only, invalid values: ${b.map(r=>`\n\`${e.x(r)}\`: \`${e.realValue(r)}\``).join(", ")}`);const x=((e,r)=>{const t=[r.sail&&!process.env.LARAVEL_SAIL?"sail":"php","artisan","rzl-ziggy:generate"];return r.group&&t.push("--group",r.group),r.url&&t.push("--url",r.url),["0","1","2"].includes(e)&&(r.types&&t.push("--types"),r.typesOnly&&t.push("--types-only"),"0"!==e&&"1"!==e||(r.only.length>0&&t.push("--only",r.only.join(",")),r.except.length>0&&t.push("--except",r.except.join(",")))),t})(a,{delay:p,throttle:d,except:y,group:g,only:h,sail:$,types:w,typesOnly:m,url:v}),{configResolved:P,handleHotUpdate:V}=o.run("development"===process.env.NODE_ENV?[{delay:p,throttle:d,onFileChanged:({file:e})=>{const r=l.default.relative(process.cwd(),e).replace(/\\/g,"/");console.log(`\n🚀 ${i.default.bold.cyanBright("Live Watcher")} ${i.default.gray("detected change in")} ${i.default.yellowBright(r)}`),console.log(`${i.default.hex("#ff6f00")("⚡ Rerunning")} ${i.default.bold.cyan(x.join(" "))} ${i.default.italic.gray("...syncing fresh routes 🔄.")}\n`)},name:"rzl-ziggy-generator",run:x,pattern:["routes/**/*.php","config/rzl-ziggy.php",".env",".env.*",".env.*.*"],condition:e=>{const r=l.default.relative(process.cwd(),e).replace(/\\/g,"/");return e.includes("/config/")&&e.endsWith("rzl-ziggy.php")||e.includes("/routes/")&&e.endsWith(".php")||".env"===r||r.startsWith(".env.")||/^config\/rzl-ziggy.php$/.test(r)||/^routes\/.*\.php$/.test(r)||/\.env(\..+)?$/.test(r)}}]:[]);return{name:"rzl-ziggy-plugin",configResolved:P,handleHotUpdate:V}}catch(r){if(console.error(`\n${i.default.bgRed.white.bold(`💥 ${d.PREFIX.NAME} ERROR `)} ${i.default.redBright("An error occurred in")} ${i.default.yellow(`[${d.NPM_NAME}/vite-plugin]`)}`),!e.g(r))throw console.error(`${i.default.red("❓ Unknown error type thrown:")}`),r;console.error(`${i.default.red("🛑 Message:")} ${i.default.white(r.message)}`),"development"===process.env.NODE_ENV?console.error(`${i.default.gray("📌 Stack Trace:")}\n${i.default.dim(r.stack||"")}`):console.error(`${i.default.gray("💡 Tip:")} Run in ${i.default.cyan("development")} mode to see stack trace.`)}return{}};